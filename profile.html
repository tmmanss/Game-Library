<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile - Nitro 5 Gaming Platform</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/theme.js"></script>
  <script src="js/auth.js" defer></script>
  <script src="js/user-actions.js" defer></script>
  <script src="js/auth-modal.js" defer></script>
  <script src="js/i18n.js" defer></script>
  <script src="js/enhancements.js" defer></script>
</head>
<body class="grid-layout">
  <header class="grid-header">
    <div class="logo">
      <img src="images/game_512.png" alt="icon" width="64" class="circular-logo">
    </div>
    <nav>
      <ul>
        <li><a href="index.html" data-i18n="nav.home">Home</a></li>
        <li><a href="store.html" data-i18n="nav.store">Store</a></li>
        <li><a href="about.html" data-i18n="nav.about">About</a></li>
        <li><a href="library.html" data-i18n="nav.library">My Library</a></li>
        <li><a href="gallery.html" data-i18n="nav.gallery">Gallery</a></li>
      </ul>
      <div class="nav-actions">
        <div class="lang-select">
          <label for="langSelect" class="form-label" style="margin:0;"><span data-i18n="ui.language">Language:</span></label>
          <select id="langSelect" class="form-select form-select-sm" style="width:auto;">
            <option value="en">English</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="kk">“ö–∞–∑–∞“õ—à–∞</option>
          </select>
        </div>
        <button id="themeToggle" class="btn-mini" type="button" title="Toggle theme">üåô Dark</button>
        <button id="openPopup" class="btn-mini sign-in-btn" type="button" title="Sign in" data-i18n="ui.signin">Sign in</button>
      </div>
    </nav>
  </header> 

  <main class="grid-main">
    <section id="profile-section" class="content-section">
      <h2>User Profile</h2>
      <div id="profileContent" class="content-card">
        <!-- Profile content will be loaded here by JavaScript -->
      </div>
    </section>
  </main>

  <footer class="grid-footer">
    <p>&copy; 2024 Nitro 5 Gaming Platform</p>
    <p>Group: SE-2409 | Mansur Tasbolat & Eraly Zalel</p>
    <p id="currentTime" class="footer-time"></p>
  </footer>

  <script>
    function updateFooterTime() {
      const timeEl = document.getElementById('currentTime');
      if (timeEl) {
        const now = new Date();
        timeEl.textContent = now.toLocaleString('en-US', { 
          month: 'short', day: '2-digit', year: 'numeric',
          hour: '2-digit', minute: '2-digit', second: '2-digit' 
        });
      }
    }
    updateFooterTime();
    setInterval(updateFooterTime, 1000);
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const user = getCurrentUserInfo();
      const profileContent = document.getElementById('profileContent');

      if (!user) {
        profileContent.innerHTML = `
          <p style="text-align: center; color: var(--text-secondary);">
            You are not logged in. Please <a href="index.html" style="color: var(--accent-color);">sign in</a> to view your profile.
          </p>
        `;
        return;
      }

      profileContent.innerHTML = `
        <div class="profile-info">
          <div class="profile-avatar">
            <div style="width: 120px; height: 120px; border-radius: 50%; background: var(--gradient-primary); display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; margin: 0 auto 1.5rem;">
              ${user.name.charAt(0).toUpperCase()}
            </div>
          </div>
          <div class="profile-details">
            <div class="profile-field">
              <strong>Name:</strong> <span>${user.name}</span>
            </div>
            <div class="profile-field">
              <strong>Email:</strong> <span>${user.email}</span>
            </div>
            ${user.phone ? `
              <div class="profile-field">
                <strong>Phone:</strong> <span>${user.phone}</span>
              </div>
            ` : ''}
            <div class="profile-field">
              <strong>Member since:</strong> <span>${new Date(user.createdAt).toLocaleDateString()}</span>
            </div>
          </div>
          <div style="text-align: center; margin-top: 2rem;">
            <button id="logoutBtn" class="btn primary">Logout</button>
          </div>
        </div>
      `;

      // Add logout functionality
      document.getElementById('logoutBtn').addEventListener('click', () => {
        logout();
        alert('You have been logged out successfully!');
        window.location.href = 'index.html';
      });
    });
  </script>

  <style>
    .profile-info {
      max-width: 600px;
      margin: 0 auto;
      padding: 2rem;
    }

    .profile-field {
      padding: 1rem;
      margin: 0.5rem 0;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      display: flex;
      gap: 1rem;
    }

    .profile-field strong {
      color: var(--accent-color);
      min-width: 120px;
    }

    .profile-field span {
      color: var(--text-primary);
    }
  </style>
</body>
</html>
